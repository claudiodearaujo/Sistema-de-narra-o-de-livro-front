<div class="container mx-auto p-6 max-w-4xl">
    <p-card>
        <ng-template pTemplate="header">
            <div class="p-4">
                <h2 class="text-2xl font-bold text-gray-800">
                    {{ isEditMode ? 'Editar Voz' : 'Nova Voz Customizada' }}
                </h2>
                <p class="text-gray-600 mt-2">
                    {{ isEditMode ? 'Atualize os dados da voz customizada' : 'Cadastre uma nova voz para usar na
                    narração de personagens' }}
                </p>
            </div>
        </ng-template>

        <form [formGroup]="voiceForm" (ngSubmit)="onSubmit()">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Nome -->
                <div class="flex flex-col gap-2">
                    <label for="name" class="font-semibold text-gray-700">
                        Nome da Voz <span class="text-red-500">*</span>
                    </label>
                    <input pInputText id="name" formControlName="name" placeholder="Ex: Narrador Épico"
                        [class.ng-invalid]="isFieldInvalid('name')" [class.ng-dirty]="isFieldInvalid('name')" />
                    <small *ngIf="isFieldInvalid('name')" class="text-red-500">
                        {{ getFieldError('name') }}
                    </small>
                </div>

                <!-- Voice ID -->
                <div class="flex flex-col gap-2">
                    <label for="voiceId" class="font-semibold text-gray-700">
                        ID da Voz <span class="text-red-500">*</span>
                    </label>
                    <input pInputText id="voiceId" formControlName="voiceId" placeholder="Ex: narrator-epic-001"
                        [class.ng-invalid]="isFieldInvalid('voiceId')" [class.ng-dirty]="isFieldInvalid('voiceId')" />
                    <small *ngIf="isFieldInvalid('voiceId')" class="text-red-500">
                        {{ getFieldError('voiceId') }}
                    </small>
                    <small class="text-gray-500">
                        Identificador único usado internamente
                    </small>
                </div>

                <!-- Gênero -->
                <div class="flex flex-col gap-2">
                    <label for="gender" class="font-semibold text-gray-700">
                        Gênero <span class="text-red-500">*</span>
                    </label>
                    <p-select id="gender" formControlName="gender" [options]="genderOptions"
                        placeholder="Selecione o gênero" optionLabel="label" optionValue="value"
                        [class.ng-invalid]="isFieldInvalid('gender')"
                        [class.ng-dirty]="isFieldInvalid('gender')"></p-select>
                    <small *ngIf="isFieldInvalid('gender')" class="text-red-500">
                        {{ getFieldError('gender') }}
                    </small>
                </div>

                <!-- Idioma -->
                <div class="flex flex-col gap-2">
                    <label for="languageCode" class="font-semibold text-gray-700">
                        Idioma <span class="text-red-500">*</span>
                    </label>
                    <p-select id="languageCode" formControlName="languageCode" [options]="languageOptions"
                        placeholder="Selecione o idioma" optionLabel="label" optionValue="value"
                        [class.ng-invalid]="isFieldInvalid('languageCode')"
                        [class.ng-dirty]="isFieldInvalid('languageCode')"></p-select>
                    <small *ngIf="isFieldInvalid('languageCode')" class="text-red-500">
                        {{ getFieldError('languageCode') }}
                    </small>
                </div>

                <!-- Descrição -->
                <div class="flex flex-col gap-2 md:col-span-2">
                    <label for="description" class="font-semibold text-gray-700">
                        Descrição
                    </label>
                    <textarea pTextarea id="description" formControlName="description" rows="3"
                        placeholder="Ex: Voz profunda e marcante, ideal para narrações épicas"></textarea>
                    <small class="text-gray-500">
                        Descreva as características da voz (opcional)
                    </small>
                </div>
            </div>

            <!-- Mensagem de erro -->
            <p-message *ngIf="errorMessage" severity="error" [text]="errorMessage" styleClass="mt-4 w-full"></p-message>

            <!-- Botões -->
            <div class="flex justify-end gap-3 mt-6">
                <p-button label="Cancelar" severity="secondary" (onClick)="onCancel()" [disabled]="loading"></p-button>
                <p-button [label]="isEditMode ? 'Salvar Alterações' : 'Cadastrar Voz'" icon="pi pi-check" type="submit"
                    [loading]="loading">
                </p-button>
            </div>
        </form>

        <ng-template pTemplate="footer">
            <div class="text-sm text-gray-600 p-2">
                <i class="pi pi-info-circle mr-2"></i>
                As vozes customizadas aparecerão na lista junto com as vozes do Gemini.
            </div>
        </ng-template>
    </p-card>
</div>