<div class="card">
    <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-semibold text-gray-700">Capítulos</h3>
        <button pButton label="Novo Capítulo" icon="pi pi-plus" (click)="createChapter()"
            [style.background-color]="'var(--color-madeira)'"></button>
    </div>

    <p-orderList [value]="chapters" [listStyle]="{'height':'auto'}" header="Lista de Capítulos" filterBy="title"
        filterPlaceholder="Filtrar por título" [dragdrop]="true" (onReorder)="onReorder()">
        <ng-template let-chapter pTemplate="item">
            <div class="flex items-center p-2 w-full flex-wrap gap-2">
                <div class="flex-1 min-w-0">
                    <div class="flex items-center gap-2">
                        <span class="font-bold text-lg">{{ chapter.orderIndex }}.</span>
                        <span class="font-medium text-lg">{{ chapter.title }}</span>
                    </div>
                    <div class="flex items-center gap-2 mt-1">
                        <p-tag [value]="getStatusLabel(chapter.status)"
                            [severity]="getStatusSeverity(chapter.status)"></p-tag>
                        <span class="text-sm text-gray-500" *ngIf="chapter.speeches">
                            {{ chapter.speeches.length }} falas
                        </span>
                    </div>
                </div>
                <div class="flex gap-2">
                    <button pButton icon="pi pi-eye" class="p-button-text p-button-rounded"
                        (click)="viewChapter(chapter)" pTooltip="Visualizar" tooltipPosition="top"></button>
                    <button pButton icon="pi pi-pencil" class="p-button-text p-button-rounded"
                        (click)="editChapter(chapter)" pTooltip="Editar" tooltipPosition="top"></button>
                    <button pButton icon="pi pi-trash" class="p-button-text p-button-rounded p-button-danger"
                        (click)="deleteChapter(chapter)" pTooltip="Excluir" tooltipPosition="top"></button>
                </div>
            </div>
        </ng-template>
    </p-orderList>
</div>